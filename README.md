# 네이버웍스 메시지 자동 알림 스케줄러

네이버웍스를 통한 팀원 관리, 노트북 지참 알림, 코드리뷰 짝꿍 배정 및 자동 메시지 발송을 위한 웹 기반 스케줄러입니다.

## 🚀 주요 기능

- **웹 인터페이스**: 브라우저에서 쉽게 관리
- **팀원 관리**: 팀원 추가/편집/삭제, 권한 설정
- **노트북 지참 알림**: 요일별 자동 당번 배정 및 알림
- **코드리뷰 짝꿍**: 자동 짝꿍 배정 및 알림
- **일반 메시지 알림**: 커스텀 메시지 스케줄링
- **Cron 스케줄링**: 정확한 시간 기반 자동 실행

## 📋 요구사항

- Node.js v16.20.2 이상
- 네이버웍스 API 접근 권한

## 🛠️ 설치 및 실행

### 1. 의존성 설치
```bash
npm install
```

### 2. 서버 실행
```bash
npm start
```

### 3. 웹 인터페이스 접속
브라우저에서 `http://localhost:3000` 접속

## 📖 사용 방법

### 팀원 관리
1. **팀원 추가**: ID, 이름, 권한 설정
2. **권한 있는 팀원**: 노트북 지참 알림에서 필수로 포함되는 팀원
3. **통계 확인**: 노트북 지참 횟수, 코드리뷰 횟수 자동 추적

### 스케줄 설정
1. **일반 메시지**: 원하는 메시지와 수신자 지정
2. **노트북 지참 알림**: 자동 당번 배정 (권한자 1명 + 일반 팀원 1명)
3. **코드리뷰 짝꿍**: 랜덤 짝꿍 배정
4. **Cron 스케줄**: `초 분 시 일 월 요일` 형식

### 노트북 지참 알림 로직
- **금요일**: 새로운 당번 배정 (주말까지 유지)
- **토/일요일**: 금요일 당번 유지
- **월~목요일**: 매일 새로운 당번 배정
- **공평성**: 지참 횟수가 적은 팀원 우선 선택

## 🔧 설정

### API 설정 (app.js 내)
```javascript
const NAVERWORKS_API_URL_BASE = "https://naverworks.danal.co.kr/message/direct/alarm/users/";
const SENDER_ID = "alarm";
const RECIPIENT_DOMAIN = "@danal.co.kr";
```

### Cron 스케줄 예시
- `0 0 9 * * MON`: 매주 월요일 오전 9시
- `0 30 8 * * 1-5`: 평일 오전 8시 30분
- `0 0 18 * * FRI`: 매주 금요일 오후 6시

## 📁 파일 구조

```
naverworks-message-cron-server/
├── app.js              # 메인 서버 파일
├── index.html          # 웹 인터페이스
├── package.json        # 프로젝트 설정
├── config.json         # 설정 파일 (자동 생성)
├── .gitignore         # Git 제외 파일 목록
└── README.md          # 프로젝트 설명서
```

## 🌐 API 엔드포인트

- `GET /` - 웹 인터페이스
- `GET /config` - 현재 설정 조회
- `POST /update-schedules` - 스케줄 설정 업데이트
- `POST /update-team-members` - 팀원 정보 업데이트

## 🔐 보안 주의사항

- `config.json` 파일에는 민감한 정보가 포함될 수 있으므로 Git에서 제외됨
- SSL 인증서 검증이 비활성화되어 있음 (개발/테스트 환경용)
- 실운영 환경에서는 적절한 보안 설정 필요

## 🐛 문제 해결

### 서버 시작 오류
```bash
# 포트가 이미 사용 중인 경우
netstat -ano | findstr :3000
```

### 메시지 전송 실패
- 네이버웍스 API 설정 확인
- 네트워크 연결 확인
- 수신자 ID가 올바른지 확인

## 📝 라이센스

ISC
